# Телеграм бот @GeoGraftbot для клиники по пересадке волос GeoGraft.

---

## В связи с ребрендингом компании GGMed (бывший Geograft) - актуальная версия бота по адресу: https://t.me/GGMedBot

### Репозиторий создан для публикации финального кода проекта:
* Суммаризация информации с сайта https://ggraft.ru/;
* Создание базы данных (БД) на основе SQLAlchemy;
* Рекомендации пациентам до - в - после операционного периода по пересадке волос;
* Установка / отмена ежедневных оповещений после операционного периода по пересадке волос;
* Формирование заявок на обратный звонок / онлайн - консультацию;
* Тестирование степени алопеции с помощью нейронной сети;
* Рекомендация по формированию передней линии для пересадки волос по форме лица с помощью нейронной сети;
* Рекомендация современных подходящих стрижек по форме лица с помощью нейронной сети.  

---
#### Детализация проекта:
1. С сайта взята слудющая информация:
   
   1.1. Описание услуг и цен;
   
   1.2. Результаты после операций по пересадке волос;
   
   1.3. Контакты;
   
   1.3. Рекоммендации до - в - после операционного периода;

2. Реализовано создание следующих таблиц:
   
   2.1. "Клиент" -  хранится мета - информация при регистрации пользователя;
   
   2.2. "Продукт" - хранится мета - информация об услугах и их стоимости;
   
   2.3. "Филиал" - хранится мета - информация об доступных филиалах клиники;
   
   2.4. "Заявки" - хранится информация между таблицами "Заявки" - "Клиент" - "Продукт" - "Филиал", заполняется при формировании заявки на обратный звонок / онлайн - консультацию;
   
   2.5. "Пациент" - хранится информация между таблицами "Пациент" - "Клиент" (необходима для установки / отмены системы оповещений после операционного периода);
   
   2.6. "Реферер" - хранится информация между таблицами "Реферер" - "Клиент" - "Заявки" (необходима для аналитики реферальной системы).

3. При стартовой команде бот запрашивает мета-информацию о пользователе и записывает ее в таблицу "Клиент":
   
   3.1. Дополняется информацией при использовании разделами "Рекомендации", "Нейросеть - ассистент" для отслеживания спама и DDOS атак;

4. При установки / отмены оповещения после операционного периода:
   
   4.1. Пациент указывает ФИО, номер телефона и дату операции для сверки с базой данных о клиентах;
   
   4.2. Пациент указывает часовой пояс для корректного ежедневного напоминания в 9:00 и 21:00 о приеме лекарственных препаратов и проведения послеоперационных процедур;

5. Дообучение и применение нейросетевых моделей:
    
   5.1. Обучение модели YOLOv5 для детекции макушки головы и классификации степени алопеции (0, 1, 2, 3, 4, 5, 6, 7 степени по шкале Норвуда - Гамильтона);
   
     5.1.1. Итоговый текст генерируется на основе GPT модели, в промт которой задается степень облысения полученная в предыдущем пункте;
   
   5.2. Обучение и применение YOLOv5 для детекции и классификации формы лица. Необходима для подбора передней линии роста волос и современных причесок, подходящих под класс лица пациента (Квадрат, Овал, Круг, Прямоугольник, Сердце);
   
     5.2.1. Итоговый текст генерируется на основе GPT модели, в промт которой задается форма лица полученная в предыдущем пункте и тип теста.
	 
6. Сервер очередей для применения нейросетевых моделей:
	
	6.1. Создание worker.py в котором при использовании "Нейросети - ассистента", применение моделей ставится на очередь, для последовательного решения задач.
	
7. Бэкап:

	7.1. Создание sheduler'ов для формирования ежедневного backup всей БД и отправкой на телеграмм - канал в случае сбоя в работе сервера.
